<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>結姉さんのAI恋愛相談室</title>
    <meta name="description" content="結姉さんがあなたの恋愛の悩みにAIで親身に回答します。">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <img src="yui.png" alt="結姉さん" class="yui-icon">
            <h1>結姉さんのAI恋愛相談室</h1>
        </div>
    </header>

    <main>
        <section id="hero">
            <h2>最近届いたお悩み相談</h2>
        </section>

        <section id="archive-section">
            <ul id="question-list">
                </ul>
        </section>

        <section id="character-info">
            <img src="chibi.png" alt="ちび結" class="chibi-icon">
            <div class="bubble">
                <p>過去のお悩みも全部ここに残していくわ。あなたの悩みと似ている解決策が見つかるかもしれないわね。</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 結姉さんのAI恋愛相談室</p>
    </footer>

    <script>
        fetch('data/questions.json')
            .then(response => response.json())
            .then(data => {
                const list = document.getElementById('question-list');
                if (!data || data.length === 0) {
                    list.innerHTML = '<li>現在、新しいお悩みを準備中です。</li>';
                    return;
                }

                // 最新20件を表示
                const recent = data.slice(0, 20);
                recent.forEach(q => {
                    const li = document.createElement('li');
                    li.style.listStyle = "none";
                    li.style.marginBottom = "15px";
                    // 日付とタイトルを表示。リンク先は post.html?file=パス
                    li.innerHTML = `
                        <span style="font-size:0.8em; color:#888;">${q.date}</span><br>
                        <a href="post.html?file=${q.file}" style="text-decoration:none; color:#d63384; font-weight:bold;">${q.title}</a>
                    `;
                    list.appendChild(li);
                });

                if (data.length > 20) {
                    const moreMsg = document.createElement('p');
                    moreMsg.innerHTML = `<small>他、全${data.length}件の相談がアーカイブされています</small>`;
                    list.after(moreMsg);
                }
            })
            .catch(err => {
                console.error(err);
                document.getElementById('question-list').innerHTML = '<li>読み込みエラーが発生しました</li>';
            });
    </script>
</body>
</html>