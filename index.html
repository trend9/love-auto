<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>結姉さんの相談室</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .site-wrapper { display: grid; grid-template-columns: 300px 1fr 300px; gap: 20px; max-width: 1400px; margin: 0 auto; }
        /* 左サイドバー */
        .sidebar-left { padding: 20px; background: #fff; border-right: 1px solid #ffecf2; }
        .yui-word { background: #fff0f5; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 0.9rem; border: 1px dashed #d63384; }
        .omikuji-btn { width: 100%; padding: 10px; background: #d63384; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .ad-space { margin-top: 30px; width: 100%; height: 500px; background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        
        /* 中央メイン */
        main { background: white; padding: 40px; min-height: 100vh; }
        .search-box { text-align: right; margin-bottom: 20px; }
        .search-box input { padding: 5px; border: 1px solid #ffc0cb; border-radius: 5px; }
        
        /* 右サイドバー */
        .sidebar-right { position: sticky; top: 0; height: 100vh; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; }
        .yui-img { width: 100%; height: auto; }
        .bubble { background: white; border: 2px solid #ffc0cb; padding: 10px 20px; border-radius: 20px; text-decoration: none; color: #d63384; font-weight: bold; margin-bottom: -10px; z-index: 10; }

        @media (max-width: 1000px) {
            .site-wrapper { grid-template-columns: 1fr; }
            .sidebar-left, .sidebar-right { display: none; }
            .mobile-chibi { display: block; position: fixed; bottom: 20px; right: 20px; z-index: 100; }
            .mobile-chibi img { width: 70px; }
        }
    </style>
</head>
<body>
    <div class="site-wrapper">
        <aside class="sidebar-left">
            <div class="yui-word">
                <strong>今日の一言</strong><br>
                <span id="daily-msg">深呼吸して、自分を褒めてあげてね。</span>
            </div>
            <button class="omikuji-btn" onclick="drawOmikuji()">結姉さんおみくじ</button>
            <div id="omikuji-result" style="margin-top:10px; font-size:0.8rem; color:#d63384;"></div>
            
            <div class="ad-space">
                <a href="index.html"><img src="ad_sample.png" alt="広告募集" style="width:100%;"></a>
            </div>
        </aside>

        <main>
            <div class="search-box">
                <input type="text" placeholder="お悩みを検索...">
            </div>
            <h1>結姉さんの相談室</h1>
            <div id="latest-post"></div>
            <hr>
            <a href="archive.html" style="color:#d63384; text-decoration:none; font-weight:bold;">→ 過去のお悩みをもっと見る</a>
        </main>

        <aside class="sidebar-right">
            <a href="profile.html" class="bubble">結姉さんのプロフィール</a>
            <img src="yui.png" alt="結姉さん" class="yui-img">
        </aside>
    </div>

    <div class="mobile-chibi" style="display:none;">
        <a href="profile.html"><img src="yuichibi.png" alt="ちび結"></a>
    </div>

    <script>
        const words = ["自分を大切にね。", "明日はきっといい日になるわ。", "無理しなくていいのよ。", "あなたの味方はここにいるわ。"];
        document.getElementById('daily-msg').innerText = words[Math.floor(Math.random() * words.length)];

        function drawOmikuji() {
            const res = ["大吉：最高の出会いがあるかも！", "中吉：自分磨きが実を結ぶわ。", "小吉：焦らずゆっくり進みましょう。"];
            document.getElementById('omikuji-result').innerText = res[Math.floor(Math.random() * res.length)];
        }

        fetch('data/questions.json')
            .then(res => res.json())
            .then(data => {
                const latest = data[0];
                document.getElementById('latest-post').innerHTML = `
                    <p style="color:#999;">${latest.date}</p>
                    <h2><a href="${latest.url}" style="text-decoration:none; color:#333;">${latest.title}</a></h2>
                    <p>${latest.description}</p>
                `;
            });
    </script>
</body>
</html>