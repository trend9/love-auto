<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>結姉さんのAI恋愛相談室 - 24時間あなたに寄り添うアドバイス</title>
    <meta name="description" content="結姉さんがあなたの恋愛の悩みにAIで親身に回答します。片思い、復縁、婚活など、誰にも言えない悩みを聞かせてください。">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <img src="yui.png" alt="結姉さん" class="yui-icon">
            <h1>結姉さんのAI恋愛相談室</h1>
        </div>
    </header>

    <main>
        <section id="hero">
            <h2>最近届いたお悩み相談</h2>
            <p>結姉さんが一つひとつ、心を込めて言葉を紡いでいます。</p>
        </section>

        <section id="archive-section">
            <ul id="question-list">
                </ul>
        </section>

        <section id="character-info">
            <img src="chibi.png" alt="ちび結" class="chibi-icon">
            <div class="bubble">
                <p>過去のお悩みも全部ここに残していくからね。あなたの悩みと似ている誰かの解決策が見つかるかもしれないわ。</p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 結姉さんのAI恋愛相談室 - 毎日更新中</p>
    </footer>

    <script>
        // data/questions.json から記事一覧を取得
        fetch('data/questions.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('データの取得に失敗しました');
                }
                return response.json();
            })
            .then(data => {
                const list = document.getElementById('question-list');
                
                if (data.length === 0) {
                    list.innerHTML = '<li>現在、新しいお悩みを準備中です。</li>';
                    return;
                }

                // 最新20件だけを表示
                const recent = data.slice(0, 20);
                recent.forEach(q => {
                    const li = document.createElement('li');
                    li.className = 'question-item';
                    
                    // 日付の表示形式を整える
                    const dateTag = `<span class="date-tag">${q.date}</span>`;
                    
                    // リンク先（post.htmlへ、ファイルパスをパラメータで渡す）
                    li.innerHTML = `
                        <a href="post.html?file=${q.file}">
                            ${dateTag}
                            <span class="title-text">${q.title}</span>
                        </a>
                    `;
                    list.appendChild(li);
                });

                // 20件以上の記事がある場合、アーカイブリンクを表示
                if (data.length > 20) {
                    const moreContainer = document.createElement('div');
                    moreContainer.className = 'more-container';
                    moreContainer.innerHTML = `
                        <p class="archive-info">全 ${data.length} 件の悩み相談が蓄積されています。</p>
                        <a href="#" id="load-more" class="btn-secondary">もっと過去の悩みを見る</a>
                    `;
                    list.after(moreContainer);

                    document.getElementById('load-more').addEventListener('click', (e) => {
                        e.preventDefault();
                        // アーカイブの全件表示（簡易実装として残りのデータを追加）
                        const remaining = data.slice(20);
                        remaining.forEach(q => {
                            const li = document.createElement('li');
                            li.className = 'question-item archive-item';
                            li.innerHTML = `
                                <a href="post.html?file=${q.file}">
                                    <span class="date-tag">${q.date}</span>
                                    <span class="title-text">${q.title}</span>
                                </a>
                            `;
                            list.appendChild(li);
                        });
                        moreContainer.remove(); // ボタンを消す
                    });
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('question-list').innerHTML = '<li>データの読み込み中にエラーが発生しました。</li>';
            });
    </script>
</body>
</html>